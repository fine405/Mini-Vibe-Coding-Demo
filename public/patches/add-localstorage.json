{
	"id": "add-localstorage-v1",
	"trigger": "add localstorage",
	"summary": "Adds localStorage persistence to save todos between sessions",
	"changes": [
		{
			"op": "update",
			"path": "/App.js",
			"content": "import React, { useState, useEffect } from 'react';\n\nconst STORAGE_KEY = 'mini-lovable-todos';\n\nexport default function App() {\n  const [todos, setTodos] = useState(() => {\n    // Load from localStorage on init\n    try {\n      const saved = localStorage.getItem(STORAGE_KEY);\n      return saved ? JSON.parse(saved) : [];\n    } catch (error) {\n      console.error('Failed to load todos:', error);\n      return [];\n    }\n  });\n  const [input, setInput] = useState('');\n  const [filter, setFilter] = useState('all');\n\n  // Save to localStorage whenever todos change\n  useEffect(() => {\n    try {\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(todos));\n    } catch (error) {\n      console.error('Failed to save todos:', error);\n    }\n  }, [todos]);\n\n  const addTodo = () => {\n    if (input.trim()) {\n      setTodos([...todos, { id: Date.now(), text: input, done: false }]);\n      setInput('');\n    }\n  };\n\n  const toggleTodo = (id) => {\n    setTodos(todos.map(todo => \n      todo.id === id ? { ...todo, done: !todo.done } : todo\n    ));\n  };\n\n  const deleteTodo = (id) => {\n    setTodos(todos.filter(todo => todo.id !== id));\n  };\n\n  const clearCompleted = () => {\n    setTodos(todos.filter(todo => !todo.done));\n  };\n\n  const filteredTodos = todos.filter(todo => {\n    if (filter === 'active') return !todo.done;\n    if (filter === 'completed') return todo.done;\n    return true;\n  });\n\n  const activeCount = todos.filter(t => !t.done).length;\n  const completedCount = todos.length - activeCount;\n\n  return (\n    <div style={{ padding: 24, maxWidth: 600, margin: '0 auto', fontFamily: 'system-ui' }}>\n      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: 24 }}>\n        <h1 style={{ margin: 0 }}>Todo App</h1>\n        <span style={{ fontSize: 12, color: '#666', background: '#f0f0f0', padding: '4px 8px', borderRadius: 4 }}>\n          ðŸ’¾ Auto-saved\n        </span>\n      </div>\n      \n      <div style={{ display: 'flex', gap: 8, marginBottom: 16 }}>\n        <input\n          type=\"text\"\n          value={input}\n          onChange={(e) => setInput(e.target.value)}\n          onKeyPress={(e) => e.key === 'Enter' && addTodo()}\n          placeholder=\"Add a new todo...\"\n          style={{\n            flex: 1,\n            padding: '8px 12px',\n            border: '1px solid #ddd',\n            borderRadius: 4,\n            fontSize: 14\n          }}\n        />\n        <button\n          onClick={addTodo}\n          style={{\n            padding: '8px 16px',\n            background: '#007bff',\n            color: 'white',\n            border: 'none',\n            borderRadius: 4,\n            cursor: 'pointer',\n            fontSize: 14\n          }}\n        >\n          Add\n        </button>\n      </div>\n\n      {todos.length > 0 && (\n        <div style={{ display: 'flex', gap: 8, marginBottom: 16, borderBottom: '1px solid #eee', paddingBottom: 12 }}>\n          <button\n            onClick={() => setFilter('all')}\n            style={{\n              padding: '6px 12px',\n              background: filter === 'all' ? '#007bff' : '#f8f9fa',\n              color: filter === 'all' ? 'white' : '#333',\n              border: '1px solid ' + (filter === 'all' ? '#007bff' : '#ddd'),\n              borderRadius: 4,\n              cursor: 'pointer',\n              fontSize: 13\n            }}\n          >\n            All ({todos.length})\n          </button>\n          <button\n            onClick={() => setFilter('active')}\n            style={{\n              padding: '6px 12px',\n              background: filter === 'active' ? '#007bff' : '#f8f9fa',\n              color: filter === 'active' ? 'white' : '#333',\n              border: '1px solid ' + (filter === 'active' ? '#007bff' : '#ddd'),\n              borderRadius: 4,\n              cursor: 'pointer',\n              fontSize: 13\n            }}\n          >\n            Active ({activeCount})\n          </button>\n          <button\n            onClick={() => setFilter('completed')}\n            style={{\n              padding: '6px 12px',\n              background: filter === 'completed' ? '#007bff' : '#f8f9fa',\n              color: filter === 'completed' ? 'white' : '#333',\n              border: '1px solid ' + (filter === 'completed' ? '#007bff' : '#ddd'),\n              borderRadius: 4,\n              cursor: 'pointer',\n              fontSize: 13\n            }}\n          >\n            Completed ({completedCount})\n          </button>\n          {completedCount > 0 && (\n            <button\n              onClick={clearCompleted}\n              style={{\n                marginLeft: 'auto',\n                padding: '6px 12px',\n                background: '#dc3545',\n                color: 'white',\n                border: 'none',\n                borderRadius: 4,\n                cursor: 'pointer',\n                fontSize: 13\n              }}\n            >\n              Clear Completed\n            </button>\n          )}\n        </div>\n      )}\n\n      <ul style={{ listStyle: 'none', padding: 0 }}>\n        {filteredTodos.map(todo => (\n          <li\n            key={todo.id}\n            style={{\n              display: 'flex',\n              alignItems: 'center',\n              gap: 8,\n              padding: '8px 12px',\n              marginBottom: 8,\n              background: '#f8f9fa',\n              borderRadius: 4\n            }}\n          >\n            <input\n              type=\"checkbox\"\n              checked={todo.done}\n              onChange={() => toggleTodo(todo.id)}\n              style={{ cursor: 'pointer' }}\n            />\n            <span\n              style={{\n                flex: 1,\n                textDecoration: todo.done ? 'line-through' : 'none',\n                color: todo.done ? '#999' : '#000'\n              }}\n            >\n              {todo.text}\n            </span>\n            <button\n              onClick={() => deleteTodo(todo.id)}\n              style={{\n                padding: '4px 8px',\n                background: '#dc3545',\n                color: 'white',\n                border: 'none',\n                borderRadius: 4,\n                cursor: 'pointer',\n                fontSize: 12\n              }}\n            >\n              Delete\n            </button>\n          </li>\n        ))}\n      </ul>\n\n      {filteredTodos.length === 0 && todos.length > 0 && (\n        <p style={{ textAlign: 'center', color: '#999', marginTop: 32 }}>\n          No {filter} todos.\n        </p>\n      )}\n\n      {todos.length === 0 && (\n        <p style={{ textAlign: 'center', color: '#999', marginTop: 32 }}>\n          No todos yet. Add one above!\n        </p>\n      )}\n    </div>\n  );\n}\n"
		}
	]
}
